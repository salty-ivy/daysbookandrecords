<!-- home_page.html -->
{% extends "base.html" %}
{% load wagtailcore_tags %}
{% load static %}

{% block title %}Home - Days Books & Records{% endblock %}

{% block content %}
{% if page.intro %}
    <div class="intro-section">
        <div class="container-narrow">
            {{ page.intro|richtext }}
        </div>
    </div>
{% endif %}
<!-- Hero Image Section -->
<div class="hero-image-section">
    <div class="hero-image-container">
        <img src="{% static 'images/hero-image.jpg' %}" alt="Days Books & Records" class="hero-image">
    </div>
</div>

<!-- Featured New Books Section -->
<section class="featured-section">
    <div class="section-header">
        <h2 class="section-title">New Books</h2>
        <p class="section-subtitle">Fresh arrivals and latest releases</p>
    </div>

    <div class="covers-grid">
        {% for book in recent_new_books|slice:":5" %}
            <article class="cover-item book-cover">
                <a href="{{ book.get_absolute_url }}" class="cover-link">
                    <div class="cover-image-container">
                        {% if book.image %}
                            <img src="{{ book.image.url }}" alt="{{ book.title }}" class="cover-image">
                        {% else %}
                            <div class="placeholder-cover book-placeholder">
                                <span class="placeholder-text">{{ book.title|truncatechars:20 }}</span>
                            </div>
                        {% endif %}
                    </div>
                </a>
            </article>
        {% endfor %}
    </div>

    <div class="section-footer">
        <a href="/new-books/" class="btn btn-outline">See more new books...</a>
    </div>
</section>

<!-- Featured Records Section -->
<section class="featured-section">
    <div class="section-header">
        <h2 class="section-title">New Records</h2>
        <p class="section-subtitle">Vinyl treasures from classic to contemporary</p>
    </div>

    <div class="covers-grid">
        {% for record in recent_records|slice:":5" %}
            <article class="cover-item record-cover">
                <a href="{{ record.get_absolute_url }}" class="cover-link">
                    <div class="cover-image-container">
                        {% if record.image %}
                            <img src="{{ record.image.url }}" alt="{{ record.title }}" class="cover-image">
                        {% else %}
                            <div class="placeholder-cover record-placeholder">
                                <span class="placeholder-text">{{ record.title|truncatechars:20 }}</span>
                            </div>
                        {% endif %}
                    </div>
                </a>
            </article>
        {% endfor %}
    </div>

    <div class="section-footer">
        <a href="/records/" class="btn btn-outline">See more records...</a>
    </div>
</section>

<!-- Featured Used Books Section -->
<section class="featured-section">
    <div class="section-header">
        <h2 class="section-title">Used Books</h2>
        <p class="section-subtitle">Rare and interesting used books: email us to find out more</p>
    </div>

    <div class="covers-grid">
        {% for book in recent_used_books|slice:":5" %}
            <article class="cover-item book-cover">
                <a href="{{ book.get_absolute_url }}" class="cover-link">
                    <div class="cover-image-container">
                        {% if book.image %}
                            <img src="{{ book.image.url }}" alt="{{ book.title }}" class="cover-image">
                        {% else %}
                            <div class="placeholder-cover book-placeholder">
                                <span class="placeholder-text">{{ book.title|truncatechars:20 }}</span>
                            </div>
                        {% endif %}
                    </div>
                </a>
            </article>
        {% endfor %}
    </div>

    <div class="section-footer">
        <a href="/used-books/" class="btn btn-outline">See more used books...</a>
    </div>
</section>

<!-- Featured News Section -->
<section class="featured-section">
    <div class="section-header">
        <h2 class="section-title">News</h2>
        <p class="section-subtitle">Stay updated with our latest articles and updates</p>
    </div>

    <div class="news-grid">
        {% for article in recent_news|slice:":3" %}
            <article class="news-card">
                <div class="news-image-wrapper">
                    {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="news-image">
                    {% else %}
                        <div class="news-image-placeholder">
                            <span class="placeholder-text">{{ article.title|truncatechars:30 }}</span>
                        </div>
                    {% endif %}
                </div>
                <div class="news-content">
                    <h3 class="news-title">{{ article.title }}</h3>
                    <div class="news-meta">
                        <span class="news-date">{{ article.publish_date|date:"M j, Y" }}</span>
                    </div>
                    <p class="news-excerpt">{{ article.excerpt|truncatechars:150 }}</p>
                    <a href="{{ article.get_absolute_url }}" class="news-read-more">Read more</a>
                </div>
            </article>
        {% endfor %}
    </div>

    <div class="section-footer">
        <a href="/news/" class="btn btn-outline">See more news...</a>
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="container-narrow">
        <div class="newsletter-content">
            <h2 class="newsletter-title">Stay Updated</h2>
            <p class="newsletter-subtitle">Get the latest news about new arrivals, rare finds, and special offers</p>
            <form class="newsletter-form" id="newsletter-form">
                {% csrf_token %}
                <div class="form-group">
                    <input type="email" name="email" id="newsletter-email" placeholder="Enter your email address" class="newsletter-input" required>
                    <button type="submit" class="btn btn-primary" id="newsletter-submit">Subscribe</button>
                </div>
                <div id="newsletter-message" class="newsletter-message" style="display: none;"></div>
            </form>
        </div>
    </div>
</section>
{% endblock %}